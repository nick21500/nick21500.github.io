AUI.add("liferay-navigation-interaction",function(a){var b="activeDescendant";var h=0;var g=1;var d={};var f="liferaynavigationinteraction";var c=function(){Liferay.fire("hideNavigationMenu",d)};var e=a.Component.create({EXTENDS:a.Plugin.Base,NAME:f,NS:f,prototype:{initializer:function(m){var j=this;var n=j.get("host");var i=n.one("> ul");var l="#"+i.guid();j._directLiChild=l+"> li";j._hostULId=l;Liferay.on(["showNavigationMenu","hideNavigationMenu"],function(p){var o=p.type=="showNavigationMenu";p.menu.toggleClass("hover",o)});if(i){i.delegate("mouseenter",j._onMouseToggle,"> li",j);i.delegate("mouseleave",j._onMouseToggle,"> li",j);i.delegate("keydown",j._handleKeyDown,"a",j)}n.plug(a.Plugin.NodeFocusManager,{descendants:"a",focusClass:"active",keys:{next:"down:40",previous:"down:38"}});var k=n.focusManager;k.after("activeDescendantChange",j._showMenu,j);k.after("focusedChange",j._showMenu,j);j._focusManager=k},_handleExit:function(k){var i=this;var j=i._focusManager;if(j.get(b)){j.set(b,0);j.blur();c()}else{setTimeout(c,0)}},_handleKey:function(m,o){var i=this;var n=m.target;var k=n.ancestors(i._directLiChild).item(0);var j=true;var l;if(o===h){l=k.previous();j=false}else{l=k.next()}if(!l){var p=k.siblings();if(j){l=p.first()}else{l=p.last()}}i._focusManager.focus(l.one("a"))},_handleKeyDown:function(k){var i=this;var j;if(k.isKey("LEFT")){j="_handleLeft"}else{if(k.isKey("RIGHT")){j="_handleRight"}else{if(k.isKey("TAB")||k.isKey("ESC")){j="_handleExit"}}}if(j){i[j](k)}},_handleLeft:function(j){var i=this;i._handleKey(j,h)},_handleRight:function(j){var i=this;i._handleKey(j,g)},_onMouseToggle:function(l){var i=this;var j=l.type=="mouseenter";var k="hideNavigationMenu";if(j){k="showNavigationMenu"}d.menu=l.currentTarget;Liferay.fire(k,d)},_showMenu:function(k){var i=this;k.halt();var j=i._focusManager;var l=j.get(b);var m=j.get("descendants");if(d.menu){Liferay.fire("hideNavigationMenu",d)}d.menu=m.item(l).ancestors(i._directLiChild);Liferay.fire("showNavigationMenu",d)}}});Liferay.NavigationInteraction=e},"",{requires:["node-focusmanager","plugin"]});